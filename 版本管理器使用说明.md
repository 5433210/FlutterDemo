# 🎯 字字珠玑 - 版本管理器使用说明

## 📋 简介

版本管理器是一个简化版本管理操作的菜单式工具，让你无需记忆复杂的命令行参数，通过直观的菜单界面轻松管理项目版本。

## 🚀 快速开始

### 方法一：双击运行（推荐）
直接双击项目根目录下的 `版本管理器.bat` 文件

### 方法二：命令行运行
```bash
python scripts/version_manager.py
```

## 📋 功能菜单

### 1. 🔄 更新构建号 (日常开发)
- **用途**：日常开发中最常用的操作
- **效果**：只更新构建号，版本号保持不变
- **示例**：`1.0.1+20250717005` → `1.0.1+20250717006`
- **适用场景**：
  - 每日构建
  - 测试版本
  - 开发过程中的小改动

### 2. 🔧 升级补丁版本 (bug修复)
- **用途**：修复bug后发布
- **效果**：升级补丁版本号（第三位数字）
- **示例**：`1.0.1` → `1.0.2`
- **适用场景**：
  - 修复已知bug
  - 小的改进和优化
  - 安全补丁

### 3. 🚀 升级次版本 (新功能)
- **用途**：添加新功能后发布
- **效果**：升级次版本号（第二位数字），补丁版本重置为0
- **示例**：`1.0.5` → `1.1.0`
- **适用场景**：
  - 新增功能
  - 界面改进
  - 性能优化

### 4. 🎉 升级主版本 (重大更新)
- **用途**：重大更新或架构变更
- **效果**：升级主版本号（第一位数字），其他版本重置为0
- **示例**：`1.5.3` → `2.0.0`
- **适用场景**：
  - 重大架构变更
  - 不兼容的API变更
  - 全新的用户界面

### 5. 📝 设置自定义版本号
- **用途**：手动设置特定的版本号
- **效果**：可以设置任意的版本号
- **示例**：手动设置为 `2.1.0`
- **适用场景**：
  - 版本号对齐
  - 特殊发布需求

### 6. 📚 查看构建历史
- **用途**：查看最近的构建记录
- **效果**：显示最近10次构建的历史记录
- **适用场景**：
  - 版本追踪
  - 问题排查

## 🔄 自动同步的文件

版本管理器会自动同步以下文件中的版本信息：

| 文件 | 更新内容 | 说明 |
|------|----------|------|
| `version.yaml` | 版本号、构建号 | 主配置文件 |
| `pubspec.yaml` | `version` 字段 | Flutter项目配置 |
| `pubspec.yaml` | `msix_version` 字段 | Windows应用商店版本 |
| `windows/runner/Runner.rc` | 文件版本信息 | Windows可执行文件信息 |
| 其他平台配置文件 | 对应版本信息 | Android、iOS、Linux等 |

## 📊 版本号格式说明

### 标准版本格式
```
主版本.次版本.补丁版本+构建号
例如：1.0.1+20250717006
```

### 各部分含义
- **主版本**：重大更新，可能包含不兼容变更
- **次版本**：新功能添加，向后兼容
- **补丁版本**：bug修复，向后兼容
- **构建号**：格式为 `YYYYMMDDXXX`，每次构建自动递增

### MSIX版本格式
```
主版本.次版本.补丁版本.0
例如：1.0.1.0
```

## ⚠️ 注意事项

1. **确认操作**：升级版本号时会要求确认，请仔细检查
2. **备份重要**：重要版本发布前建议备份项目
3. **网络连接**：某些操作可能需要网络连接
4. **权限要求**：确保对项目文件有写入权限

## 🛠️ 故障排除

### 常见问题

**Q: 提示"读取版本配置失败"**
A: 检查 `version.yaml` 文件是否存在且格式正确

**Q: 版本更新失败**
A: 检查文件权限，确保可以写入项目文件

**Q: 构建号没有更新**
A: 检查网络连接和系统时间设置

**Q: 菜单显示乱码**
A: 确保终端支持UTF-8编码

### 获取帮助

如果遇到问题，可以：
1. 查看终端输出的错误信息
2. 检查项目文件权限
3. 重启版本管理器
4. 手动运行底层脚本进行调试

## 🎯 最佳实践

1. **日常开发**：使用"更新构建号"
2. **bug修复**：使用"升级补丁版本"
3. **新功能**：使用"升级次版本"
4. **重大更新**：使用"升级主版本"
5. **发布前**：查看构建历史确认版本正确

---

**享受简化的版本管理体验！** 🎉
