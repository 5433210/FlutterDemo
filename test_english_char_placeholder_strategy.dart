/// éªŒè¯è‹±æ–‡å­—ç¬¦å ä½ç¬¦ç­–ç•¥ä¿®å¤çš„æµ‹è¯•è„šæœ¬
void main() {
  print('=== è‹±æ–‡å­—ç¬¦å ä½ç¬¦ç­–ç•¥ä¿®å¤éªŒè¯ ===\n');

  // é—®é¢˜åˆ†æ
  print('ğŸ“‹ é—®é¢˜åˆ†æï¼š');
  print('ä»æ—¥å¿—å‘ç°ï¼š');
  print('- è‹±æ–‡å­—ç¬¦ n,a,t,u,r è¢«ç»‘å®šåˆ°äº†å®é™…é›†å­—ï¼Œè€Œä¸æ˜¯å ä½ç¬¦');
  print('- è¯´æ˜æ•°æ®åº“ä¸­ç¡®å®å­˜åœ¨è¿™äº›å•å­—ç¬¦çš„é›†å­—è®°å½•');
  print('- ä½†ç”¨æˆ·å¯èƒ½ä¸å¸Œæœ›è‹±æ–‡å­—ç¬¦è‡ªåŠ¨åŒ¹é…é›†å­—\n');

  // æ—¥å¿—è¯æ®
  print('ğŸ” æ—¥å¿—è¯æ®ï¼š');
  print('characterImages: {');
  print('  0: {characterId: 2d30f8a0-9806-4fe0-8d8a-11655bea8a48} // "n"');
  print('  1: {characterId: 2d30f8a0-9806-4fe0-8d8a-11655bea8a48} // "a"');
  print('  2: {characterId: 2d30f8a0-9806-4fe0-8d8a-11655bea8a48} // "t"');
  print('  3: {characterId: 2d30f8a0-9806-4fe0-8d8a-11655bea8a48} // "u"');
  print('  4: {characterId: 2d30f8a0-9806-4fe0-8d8a-11655bea8a48} // "r"');
  print('  5: {characterId: 9e353424-ec09-4891-9594-013c05e6c01b} // "e"');
  print('  6: {characterId: placeholder_ _6, isPlaceholder: true} // " "');
  print('  7: {characterId: f739830d-28ae-46ec-b41c-399865e4947b} // "ç§‹"');
  print('}\n');

  print('ğŸ”§ ä¿®å¤ç­–ç•¥ï¼š');
  print('1. å¢åŠ è‹±æ–‡å­—ç¬¦æ£€æµ‹ï¼šRegExp(r"^[a-zA-Z]\$").hasMatch(char)');
  print('2. è‹±æ–‡å­—ç¬¦ä¼˜å…ˆä½¿ç”¨å ä½ç¬¦ï¼Œè€Œä¸æ˜¯è‡ªåŠ¨ç»‘å®šé›†å­—');
  print('3. ä¸­æ–‡å­—ç¬¦ä¿æŒè‡ªåŠ¨ç»‘å®šç²¾ç¡®åŒ¹é…çš„è¡Œä¸º');
  print('4. ç”¨æˆ·ä»å¯æ‰‹åŠ¨ä¸ºè‹±æ–‡å­—ç¬¦é€‰æ‹©é›†å­—\n');

  // ä¿®å¤åçš„é¢„æœŸè¡Œä¸º
  print('âœ… ä¿®å¤åé¢„æœŸè¡Œä¸ºï¼š');
  _simulateFixedBehavior('nature ç§‹');

  print('\nğŸ¯ ç”¨æˆ·ä½“éªŒæ”¹è¿›ï¼š');
  print('- è‹±æ–‡å­—ç¬¦æ˜¾ç¤ºå ä½ç¬¦ï¼Œè§†è§‰ä¸Šæ›´æ¸…æ™°');
  print('- ä¸­æ–‡å­—ç¬¦è‡ªåŠ¨åŒ¹é…é›†å­—ï¼Œç¬¦åˆç”¨é€”æœŸæœ›');
  print('- ç”¨æˆ·å¯é€‰æ‹©æ€§åœ°ä¸ºè‹±æ–‡å­—ç¬¦ç»‘å®šé›†å­—');
  print('- é¿å…äº†æ„å¤–çš„è‡ªåŠ¨ç»‘å®šè¡Œä¸º\n');

  print('ğŸ§ª éªŒè¯æ­¥éª¤ï¼š');
  print('1. è¾“å…¥ "nature ç§‹"');
  print('2. åˆ‡æ¢åˆ°å­—ç¬¦åŒ¹é…æ¨¡å¼');
  print('3. æ£€æŸ¥é¢„è§ˆé¢æ¿ï¼š');
  print('   - ä½ç½®0-5 (n,a,t,u,r,e)ï¼šæ˜¾ç¤ºå ä½ç¬¦');
  print('   - ä½ç½®6 (ç©ºæ ¼)ï¼šæ˜¾ç¤ºå ä½ç¬¦');
  print('   - ä½ç½®7 (ç§‹)ï¼šæ˜¾ç¤ºé›†å­—');
  print('4. ç‚¹å‡»è‹±æ–‡å­—ç¬¦ä½ç½®éªŒè¯å¯æ‰‹åŠ¨é€‰æ‹©é›†å­—');
}

/// æ¨¡æ‹Ÿä¿®å¤åçš„å­—ç¬¦å¤„ç†è¡Œä¸º
void _simulateFixedBehavior(String text) {
  for (int i = 0; i < text.length; i++) {
    final char = text[i];
    final displayChar = char == ' ' ? '(ç©ºæ ¼)' : char;

    print('ä½ç½®$i: "$displayChar"');

    if (char.trim().isEmpty) {
      print('  â†’ ç©ºç™½å­—ç¬¦ â†’ å ä½ç¬¦');
    } else if (_isEnglishChar(char)) {
      print('  â†’ è‹±æ–‡å­—ç¬¦ â†’ å ä½ç¬¦ (å³ä½¿æ•°æ®åº“æœ‰åŒ¹é…)');
    } else if (_isChineseChar(char)) {
      print('  â†’ ä¸­æ–‡å­—ç¬¦ â†’ æœç´¢ç²¾ç¡®åŒ¹é… â†’ è‡ªåŠ¨ç»‘å®šé›†å­—');
    } else {
      print('  â†’ å…¶ä»–å­—ç¬¦ â†’ æœç´¢ç²¾ç¡®åŒ¹é…');
    }
  }
}

/// æ£€æŸ¥æ˜¯å¦ä¸ºè‹±æ–‡å­—ç¬¦
bool _isEnglishChar(String char) {
  return RegExp(r'^[a-zA-Z]$').hasMatch(char);
}

/// æ£€æŸ¥æ˜¯å¦ä¸ºä¸­æ–‡å­—ç¬¦
bool _isChineseChar(String char) {
  final int code = char.codeUnitAt(0);
  return code >= 0x4e00 && code <= 0x9fff;
}
