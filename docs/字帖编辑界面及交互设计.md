# 字帖编辑

- 界面布局
  - 顶部导航栏
    - 文件组
      - 保存
    - 保存到指定位置
    - 导出
      - 弹出导出对话框
    - 打印
      - 弹出打印预览对话框
  - 视图组
    - 页面缩略图列表开关
  - 操作组
    - 撤销、重做
      - 支持对页面、图层、内容、组合控件的每一次属性调整进行撤销和重做
  - 左侧面板
    - 内容控件
      - 集字内容
      - 文本内容
      - 图片内容
    - 图层管理
      - 工具栏
        - 新增图层按钮
        - 删除所有图层
        - 显示所有图层
      - 图层列表
        - 图层选择（点击）
        - 图层重排（拖拽指定按钮）
        - 图层可见开关（按钮）
        - 图层锁定开关（按钮）
        - 图层删除（按钮）
        - 图层重命名（按钮）
  - 中央编辑区
    - 顶部工具栏
      - 编辑操作组
        - 页面平移
        - 复制/粘贴
        - 删除
        - 组合、取消组合
      - 辅助功能组
        - 参考线网格设置（下拉菜单设置大小）
        - 智能吸附开关
    - 底部页面栏
      - 页面内容缩略预览
      - 页面顺序重排
      - 添加页面
      - 删除页面
        - 支持多选删除
      - 页面选择
        - 单选
        - 多选
      - 鼠标滚轮平移
    - 中间页面编辑区
      - 页面平移缩放
        - 平移
          - 鼠标drag页面
        - 缩放
          - 鼠标滚轮滚动
      - 拖拽放置内容控件（矩形线框，蓝色）
        - 内容控件首次放置时默认为编辑状态（蓝色线框，带有自由变换控制点），默认大小
      - 编辑状态的内容（组合）控件
        - 可以自由变换控制点（调整位置，大小，旋转角度，以及平移控件）
        - 右侧属性面板切换到对应的内容（组合）控件属性
        - 点击内容（组合）控件以外的图层空白位置，内容控件切换为普通状态（灰色线框）
        - 页面最多只有一个处于编辑状态的内容控件
      - 内容（组合）控件选择
        - 单选
          - 点击内容（组合）控件，切换到编辑状态
        - 多选
          - Ctrl+点击，选择不同的内容（组合）控件
          - 鼠标框选多个内容（组合）控件
          - 多选追加
            - Ctrl+点击未选中的内容（组合）控件
            - Ctrl+框选未选中的内容（组合）控件
          - 多选减少
            - Ctrl+点击已经选择的内容（组合）控件
            - Ctrl+框选已经选择的内容（组合）控件
          - 内容（组合）控件多选后，选中的控件切换到选中状态（蓝色线框，不带自由变换控制点）
          - 在所有选中的内容（组合）控件外围增加蓝色矩形线框包围
          - 可以对多选内容（组合）进行平移
          - 可以对多选内容（组合）进行组合
            - 对内容（组合）多选后，点击工具栏组合
            - 支持组合控件的再次组合
      - 取消内容（组合）控件选择
        - 点击页面空白处
      - 组合内容控件
        - 多选内容（组合）控件后，点击工具栏进行组合
        - 组合控件默认也是编辑状态（蓝色线框，带自由变换控制点）
        - 组合控件使用自由变换控制点调整时，其中的内容控件也相应地进行等比例线性变换
        - 组合控件支持再次组合
      - 取消内容控件组合
        - 点击选中组合控件，再点击工具栏取消组合
        - 取消组合后，原来的被组合控件切换为普通状态
      - 删除内容（组合）控件
        - 内容（组合）控件选中后，点击工具栏删除按钮
      - 内容控件的显示
        - 集字内容
          - 根据属性进行显示
        - 文本内容
          - 根据属性进行显示
        - 图片内容
          - 根据属性进行显示
  - 右侧属性面板
    - 集字属性（选中集字内容）
      - 属性区
        - 位置、大小、旋转角度
        - 书写方向（行内（左往右/右往左/上往下/下往上），行间（左往右/右往左/上往下/下往上））
        - 对齐方式（上对齐、水平居中对齐、下对齐、左对齐、右对齐、垂直居中对齐）
        - 间距（行间距，字间距）
        - 边距（上边距，下边距，左边距，右边距）
        - 透明度、颜色（字体颜色、背景颜色）、大小、默认集字图片类型
        - 所属图层
      - 内容区
        - 汉字输入框
          - 支持多个汉字
          - 支持多行汉字
        - 集字预览列表
          - 根据属性区属性以及输入框汉字生成的图片列表；
          - 如果在现有集字字库内没有匹配的，则使用标准汉字生成占位图；
        - 候选集字列表
          - 选择集字列表项后更新
          - 快速筛选工具栏
            - 书法风格、书写工具筛选
            - 模糊搜索作者、作品、标签
          - 网格视图显示匹配的候选集字
          - 每个字显示缩略图和来源信息
          - 悬停显示大图预览
          - 点击后更新到对应的集字预览列表项
      - 交互
        - 页面编辑区实时根据属性的变化重绘内容
    - 文本内容属性（选中文本内容）
      - 属性区
        - 位置、大小、旋转角度、对齐方式、间距、边距、透明度、字体、字号、颜色（字体颜色、字体背景颜色）、所属图层（只读）
      - 内容区
        - 内容输入框
      - 交互
        - 页面编辑区实时根据属性的变化重绘内容  
    - 图片内容属性（选中图片内容）
      - 属性区
        - 位置、大小、旋转角度、透明度、所属图层
      - 内容区
        - 图片选择
        - 图片变换
          - 裁剪（上边距，下边距，左边距，右边距）
          - 旋转（角度输入）
          - 反转（上下、左右）
          - 透明度
        - 图片预览
        - 交互
          - 页面编辑区实时根据属性的变化重绘内容
    - 组合属性（选中组合控件）
      - 属性区
        - 位置、大小、旋转角度、透明度、所属图层
    - 图层属性（选中图层列表视图的特定图层）
      - 属性区
        - 背景图设置
        - 透明度
        - 缩略图、透明度
        - 图片素材库
    - 页面属性（新建页面或选中页面空白区）
      - 尺寸大小
        - 预设
        - 自定义
      - 页边距调整
        - 上、下、左、右
      - 背景设置
        - 纹理
        - 颜色
        - 透明度
      - 页面属性变化后
        - 内容（组合）控件需要自适应调整
          - 等比例线性缩放大小
- 定时保存
  - 支持定时保存到临时存储区，应用意外退出时，可以恢复
  - 退出前检查未保存内容
