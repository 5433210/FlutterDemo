# 日志筛选关键字说明

为了方便调试字符匹配逻辑，我们为相关日志添加了筛选关键字。您可以使用这些关键字快速过滤和查看相关日志。

## 字符服务 (CharacterService) 日志筛选关键字

### 核心搜索流程
- `[WORD_MATCHING_DEBUG]` - 词匹配优先模式的相关日志
- `[CHARACTER_MATCHING_DEBUG]` - 字符匹配模式的相关日志
- `[SEARCH_RESULT_DEBUG]` - 最终搜索结果的日志

### 智能分词搜索
- `[SMART_SEGMENTATION_DEBUG]` - 智能分词搜索的相关日志，包括：
  - 空格分隔词语处理
  - 中英文混合文本分割
  - 精确匹配无结果时的回退策略

### 字符逐个搜索
- `[CHARACTER_SEARCH_DEBUG]` - 字符逐个搜索的相关日志
- `[CHARACTER_EXACT_MATCH]` - 字符精确匹配的详细日志，包括：
  - 字符编码信息
  - 是否为中文字符
  - 精确匹配验证
  - 非精确匹配警告
- `[CHARACTER_FUZZY_MATCH]` - 字符模糊匹配的相关日志

## 属性面板 (M3CollectionPropertyPanel) 日志筛选关键字

### 匹配模式和预览
- `[WORD_MATCHING_DEBUG]` - 词匹配模式的相关日志
- `[CHARACTER_MATCHING_DEBUG]` - 字符匹配模式的相关日志，包括：
  - 实时搜索精确匹配检查
  - 自动选择精确匹配候选
  - 设置占位符的原因

## 日志筛选使用方法

### 方法1：使用VS Code搜索
1. 按 `Ctrl+Shift+F` 打开全局搜索
2. 在搜索框中输入关键字，如 `[WORD_MATCHING_DEBUG]`
3. 在文件过滤器中输入 `*.log` 或具体的日志文件名

### 方法2：使用终端命令筛选
```bash
# 筛选词匹配模式相关日志
grep "\[WORD_MATCHING_DEBUG\]" app.log

# 筛选字符匹配模式相关日志
grep "\[CHARACTER_MATCHING_DEBUG\]" app.log

# 筛选精确匹配相关日志
grep "\[CHARACTER_EXACT_MATCH\]" app.log

# 筛选智能分词相关日志
grep "\[SMART_SEGMENTATION_DEBUG\]" app.log

# 组合筛选多个关键字
grep -E "\[WORD_MATCHING_DEBUG\]|\[CHARACTER_MATCHING_DEBUG\]" app.log
```

### 方法3：使用日志查看工具
如果您使用专门的日志查看工具，可以设置过滤器来筛选这些关键字。

## 关键日志说明

### 重要的调试信息

1. **精确匹配验证**
   - 关键字：`[CHARACTER_EXACT_MATCH]`
   - 说明：这些日志会详细显示字符的编码信息和匹配结果，包括是否真正精确匹配的验证

2. **非精确匹配警告**
   - 关键字：`发现非精确匹配的结果!`
   - 说明：如果 `searchExact` 返回了非精确匹配的结果，会生成警告日志

3. **匹配模式选择**
   - 关键字：`[WORD_MATCHING_DEBUG]` 或 `[CHARACTER_MATCHING_DEBUG]`
   - 说明：显示使用了哪种匹配模式以及相应的搜索参数

4. **搜索结果详情**
   - 关键字：`[SEARCH_RESULT_DEBUG]`
   - 说明：显示最终的搜索结果数量和模式

## 调试建议

1. **如果英文字母匹配到同一个 characterId**：
   - 查看 `[CHARACTER_EXACT_MATCH]` 日志，检查返回的结果是否真正精确匹配
   - 查看 `发现非精确匹配的结果!` 警告

2. **如果词匹配模式出现问题**：
   - 查看 `[WORD_MATCHING_DEBUG]` 日志，检查精确匹配的结果
   - 查看 `[SMART_SEGMENTATION_DEBUG]` 日志，了解分词和回退策略

3. **如果字符匹配模式出现问题**：
   - 查看 `[CHARACTER_MATCHING_DEBUG]` 日志，了解字符匹配的详细过程
   - 查看 `[CHARACTER_SEARCH_DEBUG]` 日志，了解逐个字符搜索的过程

## 注意事项

- 所有关键字都使用方括号 `[]` 包围，便于准确筛选
- 日志中包含了详细的数据信息，如字符编码、ID、页面ID等
- 对于敏感或重要的匹配问题，建议同时查看多个相关关键字的日志
