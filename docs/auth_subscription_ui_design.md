# 认证与订阅界面设计文档

**创建日期**：2025年5月7日  
**状态**：初稿，更新于2025年5月7日  
**作者**：技术团队  

## 1. 概述

本文档详细描述了应用程序的认证与订阅界面设计，包括登录、注册、账户管理和订阅管理等界面。这些设计遵循项目已有的桌面应用界面设计指引，同时考虑多平台适配需求。

### 1.1 设计目标

- 提供直观、易用的认证流程，减少用户注册和登录的障碍
- 设计清晰的订阅界面，帮助用户理解不同订阅方案的价值
- 确保跨平台的一致用户体验，同时尊重各平台设计规范
- 提供无缝的订阅状态转换和管理体验

### 1.2 用户流程概览

```
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│  未登录状态  │ --> │  认证界面   │ --> │  已登录状态  │
└─────────────┘     └─────────────┘     └─────────────┘
                                              │
                                              v
┌─────────────┐     ┌─────────────┐     ┌─────────────┐
│ 订阅管理界面 │ <-- │ 订阅方案选择 │ <-- │ 免费用户状态 │
└─────────────┘     └─────────────┘     └─────────────┘
```

## 2. 认证界面设计

### 2.1 登录界面

#### 2.1.1 界面布局

```
┌────────────────────────────────────────────┐
│               应用Logo/名称                 │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │           Microsoft登录按钮         │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │              邮箱输入框             │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │              密码输入框             │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────┐  ┌────────────────┐    │
│  │     登录       │  │    注册账号     │    │
│  └────────────────┘  └────────────────┘    │
│                                            │
│  [忘记密码?]           [隐私政策条款]       │
└────────────────────────────────────────────┘
```

#### 2.1.2 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| Microsoft登录按钮 | 点击 | 调用MSAL认证流程 |
| 邮箱输入框 | 输入 | 校验邮箱格式 |
| 密码输入框 | 输入 | 显示密码强度 |
| 登录按钮 | 点击 | 提交登录请求，显示加载动画 |
| 注册账号 | 点击 | 切换到注册界面 |
| 忘记密码 | 点击 | 打开密码重置流程 |

#### 2.1.3 视觉规范

- **颜色**：使用主色#2196F3作为主按钮和强调色
- **排版**：
  - 标题：24px，600字重
  - 输入框标签：14px，400字重
  - 按钮文本：14px，500字重
  - 辅助文本：12px，400字重
- **间距**：
  - 组件间垂直间距：24px
  - 按钮水平间距：16px
  - 内边距：输入框16px，按钮16px水平，8px垂直

#### 2.1.4 多平台适配

| 平台 | 适配方案 |
|------|---------|
| 桌面端(Windows/Linux/macOS) | 居中弹窗，宽480px |
| 移动端(Android/iOS) | 全屏页面，保持元素样式一致 |
| Web | 响应式布局，小屏幕时转为移动端样式 |

### 2.2 注册界面

#### 2.2.1 界面布局

```
┌────────────────────────────────────────────┐
│               应用Logo/名称                 │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │           Microsoft注册按钮         │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │              邮箱输入框             │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │              密码输入框             │    │
│  └────────────────────────────────────┘    │
│                                            │
│  ┌────────────────────────────────────┐    │
│  │           确认密码输入框            │    │
│  └────────────────────────────────────┘    │
│                                            │
│  □ 我同意服务条款和隐私政策               │
│                                            │
│  ┌────────────────┐  ┌────────────────┐    │
│  │     注册       │  │    返回登录     │    │
│  └────────────────┘  └────────────────┘    │
└────────────────────────────────────────────┘
```

#### 2.2.2 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| Microsoft注册按钮 | 点击 | 使用Microsoft账户注册 |
| 邮箱输入框 | 输入+失焦 | 校验邮箱格式和唯一性 |
| 密码输入框 | 输入 | 实时显示密码强度提示 |
| 确认密码 | 输入 | 校验与密码是否一致 |
| 同意条款复选框 | 点击 | 切换选中状态，影响注册按钮可用性 |
| 注册按钮 | 点击 | 提交注册请求，显示进度 |

### 2.3 账户管理界面

#### 2.3.1 界面布局

```
┌─────────────────────────────────────────────────┐
│ 账户与订阅                                  ⚙️ │
├─────────────────────────────────────────────────┤
│                                                 │
│  用户信息卡片                                   │
│  ┌─────────────────────────────────────────┐    │
│  │  👤 [头像]  用户名                      │    │
│  │            邮箱                         │    │
│  │            账户类型：Premium            │    │
│  │                                        │    │
│  │            [编辑资料]                   │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  订阅信息                                       │
│  ┌─────────────────────────────────────────┐    │
│  │  当前方案：高级订阅                      │    │
│  │  状态：有效                             │    │
│  │  到期时间：2026年5月7日                  │    │
│  │  自动续费：已开启                        │    │
│  │                                        │    │
│  │  [管理订阅]        [查看历史订单]       │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  安全设置                                       │
│  ┌─────────────────────────────────────────┐    │
│  │  [更改密码]                             │    │
│  │  [双因素认证]：已启用                    │    │
│  │  [设备管理]：3台设备已登录               │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │              [退出登录]                  │    │
│  └─────────────────────────────────────────┘    │
└─────────────────────────────────────────────────┘
```

## 3. 订阅界面设计

### 3.1 订阅方案选择界面

#### 3.1.1 界面布局

```
┌─────────────────────────────────────────────────┐
│ 选择订阅方案                                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────┐  │
│  │   免费版    │  │   标准版    │  │  高级版  │  │
│  │             │  │  ✓ 推荐    │  │          │  │
│  ├─────────────┤  ├─────────────┤  ├─────────┤  │
│  │   ¥0        │  │ ¥18/月      │  │ ¥28/月   │  │
│  │   免费使用   │  │ 或¥198/年   │  │ 或¥298/年 │  │
│  ├─────────────┤  ├─────────────┤  ├─────────┤  │
│  │ • 基础功能   │  │ • 全部功能   │  │ • 全部功能 │  │
│  │ • 单设备使用 │  │ • 3台设备    │  │ • 5台设备  │  │
│  │ • 功能限制   │  │ • 优先支持   │  │ • 专属功能 │  │
│  │ • 社区支持   │  │ • 无广告     │  │ • VIP支持  │  │
│  ├─────────────┤  ├─────────────┤  ├─────────┤  │
│  │   当前方案   │  │   升级      │  │   升级    │  │
│  └─────────────┘  └─────────────┘  └─────────┘  │
│                                                 │
│  支付方式                                       │
│  ○ Microsoft Store (Windows/Linux)              │
│  ○ Google Play (Android)                        │
│  ○ App Store (iOS/macOS)                        │
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │              继续订阅                    │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  温馨提示：订阅将根据您的设备平台使用相应的支付渠道  │
│  所有订阅均可随时取消，详见《订阅条款》            │
└─────────────────────────────────────────────────┘
```

#### 3.1.2 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 订阅方案卡片 | 点击 | 选中对应方案，高亮显示 |
| 支付方式选项 | 点击 | 选择对应支付渠道 |
| 继续订阅按钮 | 点击 | 根据所选方案和支付方式，跳转到相应支付流程 |
| 订阅条款链接 | 点击 | 打开订阅条款详情 |

#### 3.1.3 视觉规范

- **卡片样式**：
  - 圆角：8px
  - 阴影：轻微阴影，悬停时加深
  - 边框：选中状态时使用主色边框
  - 推荐标签：使用强调色背景
- **价格展示**：
  - 主价格：20px，600字重
  - 周期说明：14px，400字重
- **功能列表**：
  - 项目符号：使用 • 开头
  - 字体：14px，400字重
  - 行间距：20px

### 3.2 订阅管理界面

#### 3.2.1 界面布局

```
┌─────────────────────────────────────────────────┐
│ 订阅管理                                        │
├─────────────────────────────────────────────────┤
│                                                 │
│  当前订阅信息                                    │
│  ┌─────────────────────────────────────────┐    │
│  │  方案：高级版                           │    │
│  │  开始日期：2025年1月7日                  │    │
│  │  下次续费：2025年6月7日                  │    │
│  │  支付渠道：Microsoft Store               │    │
│  │  订阅ID：MS-1234-5678-9012              │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  订阅设置                                       │
│  ┌─────────────────────────────────────────┐    │
│  │  自动续费                       [开关]   │    │
│  │  价格变动提醒                   [开关]   │    │
│  │  订阅到期提醒                   [开关]   │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  操作                                          │
│  ┌─────────────────────────────────────────┐    │
│  │  [更改订阅方案]                          │    │
│  │  [查看订单历史]                          │    │
│  │  [取消订阅]                             │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  设备管理                                       │
│  ┌─────────────────────────────────────────┐    │
│  │  当前活跃设备：3/5                       │    │
│  │  • Windows PC (当前设备)                 │    │
│  │  • Android Phone                       │    │
│  │  • iPad                                │    │
│  │                                        │    │
│  │  [管理设备]                             │    │
│  └─────────────────────────────────────────┘    │
└─────────────────────────────────────────────────┘
```

#### 3.2.2 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 自动续费开关 | 点击 | 切换自动续费状态，显示确认对话框 |
| 更改订阅方案 | 点击 | 跳转到订阅方案选择界面 |
| 取消订阅 | 点击 | 显示确认对话框，说明取消后果 |
| 管理设备 | 点击 | 进入设备管理界面，可移除设备 |

### 3.3 订阅状态展示

#### 3.3.1 状态指示设计

```
┌─────────────────────────────────┐
│ 应用标题栏                 👤 ✓ │  <- 订阅状态指示（绿色对勾）
└─────────────────────────────────┘

功能限制提示（免费用户）：
┌─────────────────────────────────┐
│ ℹ️ 此功能在免费版中有使用限制     │
│   升级到高级版获得完整体验 [升级] │
└─────────────────────────────────┘

订阅到期提醒：
┌─────────────────────────────────┐
│ ⚠️ 您的订阅将在3天后到期        │
│   立即续订以继续享受高级功能 [续订]│
└─────────────────────────────────┘
```

#### 3.3.2 不同状态的视觉处理

| 状态 | 视觉处理 | 行为 |
|------|---------|------|
| 有效订阅 | 状态栏显示绿色对勾，不限制功能 | 正常访问所有功能 |
| 即将过期 | 黄色警告提示，倒计时显示 | 提供快捷续订按钮 |
| 已过期 | 红色警告提示，功能降级 | 限制高级功能，提供恢复订阅入口 |
| 免费用户 | 部分功能显示升级提示 | 在高级功能处显示升级入口 |

### 3.4 免费试用相关界面

为支持新用户免费试用功能，需要添加以下专门的UI组件和界面。

#### 3.4.1 试用激活页面

新用户完成注册后显示的试用激活页面：

```
┌─────────────────────────────────────────────────┐
│ 欢迎使用！                                      │
├─────────────────────────────────────────────────┤
│                                                 │
│  🎉 您的账户已成功创建                           │
│                                                 │
│  立即开始14天免费试用，体验全部高级功能！         │
│                                                 │
│  免费试用包含:                                  │
│  • 全部高级功能的完整访问权限                    │
│  • 多设备同步 (最多3台设备)                     │
│  • 无限导出                                     │
│  • 优先客户支持                                 │
│                                                 │
│  试用期结束后自动转为免费版，无需任何操作         │
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │         立即开始免费试用                 │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  [跳过试用，继续使用免费版]                      │
└─────────────────────────────────────────────────┘
```

##### 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 立即开始免费试用按钮 | 点击 | 激活试用期，显示成功提示，引导进入主界面 |
| 跳过试用链接 | 点击 | 不激活试用，直接进入应用主界面 |

##### 视觉规范

- **主色调**：紫色(#9C27B0)作为试用期专属颜色
- **激活按钮**：渐变背景(#9C27B0 → #673AB7)，白色文字
- **图标**：使用钻石(💎)或礼物(🎁)图标表示试用特权
- **排版**：
  - 主标题：24px，600字重
  - 功能列表：16px，400字重
  - 按钮文本：16px，500字重

#### 3.4.2 试用状态指示器

在应用界面中显示的试用状态指示器：

```
┌─────────────────────────────────┐
│ 应用标题栏            💎 12天 👤 │  <- 试用状态指示
└─────────────────────────────────┘

试用状态指示器（展开状态）：
┌─────────────────────────────────┐
│ 💎 高级功能试用                  │
│ 剩余12天 · 2025年5月19日到期     │
│ [立即订阅] [了解更多]            │
└─────────────────────────────────┘
```

##### 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 试用状态图标 | 点击/悬停 | 展开试用状态详情 |
| 立即订阅按钮 | 点击 | 跳转到订阅方案选择页面 |
| 了解更多链接 | 点击 | 打开试用期详情页面 |

##### 视觉规范

- **收起状态**：紧凑显示，仅显示图标和剩余天数
- **展开状态**：悬浮卡片，显示详细信息和操作按钮
- **颜色**：
  - 背景：紫色渐变
  - 文字：白色
  - 按钮：半透明白色，悬停时不透明

#### 3.4.3 订阅方案页面中的试用状态

在订阅方案选择界面添加试用状态信息：

```
┌─────────────────────────────────────────────────┐
│ 选择订阅方案                                    │
├─────────────────────────────────────────────────┤
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │  💎 您正在试用高级功能                   │    │
│  │  剩余试用天数: 12天                      │    │
│  │  试用到期日: 2025年5月19日               │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  ┌─────────────┐  ┌─────────────┐  ┌─────────┐  │
│  │   免费版    │  │   标准版    │  │  高级版  │  │
│  │             │  │  ✓ 推荐    │  │          │  │
// ...existing subscription cards...
```

##### 视觉规范

- 试用状态卡片使用紫色背景，与订阅卡片区分
- 剩余天数使用大号字体(18px)加粗显示
- 卡片顶部添加进度条，直观显示剩余试用时间

#### 3.4.4 试用期详情页面

专门的试用期状态和详情页面：

```
┌─────────────────────────────────────────────────┐
│ 试用期状态                                      │
├─────────────────────────────────────────────────┤
│                                                 │
│  当前状态: 试用期有效                            │
│  开始日期: 2025年5月7日                         │
│  结束日期: 2025年5月21日                        │
│  剩余天数: 12天                                 │
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │ 试用进度                                │    │
│  │ [========------------] 40% 完成         │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  试用版包含的功能:                               │
│  • 标准版全部功能                               │
│  • 多设备同步 (最多3台)                         │
│  • 高级导出选项                                 │
│  • 无广告体验                                   │
│                                                 │
│  ┌─────────────────────────────────────────┐    │
│  │         立即订阅以保留这些功能           │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  试用到期后会发生什么?                           │
│  您的账户将自动降级为免费版，高级功能将不再可用。  │
│  您的数据将被保留，但可能无法访问某些高级功能创建的 │
│  内容。                                         │
└─────────────────────────────────────────────────┘
```

##### 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 立即订阅按钮 | 点击 | 跳转到订阅方案选择页面 |
| 试用进度条 | 悬停 | 显示已使用和剩余天数的详细信息 |

##### 视觉规范

- 进度条使用从紫色到蓝色的渐变色
- 时间相关信息使用卡片式布局，突出显示
- 到期警告使用淡黄色背景提示框

#### 3.4.5 试用到期提醒对话框

试用期即将到期时的提醒对话框：

```
┌─────────────────────────────────────────────┐
│ 试用期即将结束                              │
├─────────────────────────────────────────────┤
│                                            │
│  您的免费试用还有3天到期                     │
│                                            │
│  不想失去高级功能的访问权限?                 │
│  立即订阅，享受特别优惠:                     │
│                                            │
│  • 首月5折优惠                             │
│  • 无缝过渡，保留所有设置和数据              │
│  • 随时取消                                │
│                                            │
│  ┌────────────────┐  ┌────────────────┐    │
│  │  立即订阅      │  │  稍后再说       │    │
│  └────────────────┘  └────────────────┘    │
└─────────────────────────────────────────────┘
```

##### 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 立即订阅按钮 | 点击 | 跳转到订阅方案选择页面，可能带有优惠码 |
| 稍后再说按钮 | 点击 | 关闭对话框，后续会再次提醒 |

##### 视觉规范

- 对话框使用轻微动画效果引起注意
- 立即订阅按钮使用强调色，稍后再说按钮使用次要样式
- 优惠信息使用高亮标记

#### 3.4.6 帐户管理界面中的试用信息

在帐户管理界面中集成试用状态信息：

```
┌─────────────────────────────────────────────────┐
│ 账户与订阅                                  ⚙️ │
├─────────────────────────────────────────────────┤
│                                                 │
│  用户信息卡片                                   │
│  ┌─────────────────────────────────────────┐    │
│  │  👤 [头像]  用户名                      │    │
│  │            邮箱                         │    │
│  │            账户类型：试用期 (12天剩余)   │    │
│  │                                        │    │
│  │            [编辑资料]                   │    │
│  └─────────────────────────────────────────┘    │
│                                                 │
│  试用状态                                       │
│  ┌─────────────────────────────────────────┐    │
│  │  试用方案：标准版功能                    │    │
│  │  开始日期：2025年5月7日                  │    │
│  │  到期日期：2025年5月21日                 │    │
│  │  剩余天数：12天                         │    │
│  │                                        │    │
│  │  [查看试用详情]     [提前订阅]           │    │
│  └─────────────────────────────────────────┘    │
// ...existing account management content...
```

#### 3.4.7 功能限制提示调整

针对试用状态的功能提示横幅：

```
试用期功能体验提示：
┌─────────────────────────────────┐
│ 💎 您正在试用此高级功能           │
│   试用结束后将不可用 [立即订阅]   │
└─────────────────────────────────┘

特定功能试用体验计数器：
┌─────────────────────────────────┐
│ 高级导出功能                     │
│ 试用期内已使用: 3/10             │
│ [升级账户解锁无限使用]            │
└─────────────────────────────────┘
```

##### 交互规范

| 元素 | 交互 | 行为 |
|------|------|------|
| 立即订阅按钮 | 点击 | 跳转到订阅页面 |
| 升级账户按钮 | 点击 | 跳转到订阅页面 |
| 提示横幅 | 关闭 | 在当前会话中不再显示该提示 |

##### 视觉规范

- 提示横幅使用半透明背景，不干扰主界面内容
- 使用钻石图标和紫色调明确标识试用功能
- 计数器使用进度条直观显示使用量

## 4. 多平台适配策略

### 4.1 桌面平台统一设计

Windows和Linux平台使用相同的设计语言，符合桌面应用界面设计指引：

- 菜单位置：在应用设置中添加"账户与订阅"选项
- 弹窗尺寸：统一使用固定宽度（登录：480px，订阅：640px）
- 支付流程：集成Microsoft Store API，支持订阅购买

### 4.2 移动平台适配

Android和iOS平台需要考虑屏幕尺寸和平台设计规范：

| 平台 | 适配点 | 处理方式 |
|------|-------|---------|
| Android | Material Design | 使用MD风格组件，符合Android设计语言 |
|         | Google Play 订阅 | 集成Play Billing API |
|         | 返回手势 | 支持Android手势导航 |
| iOS     | iOS设计规范 | 符合iOS UI指南，使用原生风格组件 |
|         | Apple订阅 | 集成StoreKit，支持应用内购买 |
|         | 安全区域 | 适配刘海屏和底部手势区 |

### 4.3 macOS平台适配

- 遵循macOS设计语言
- 菜单栏集成
- 支持Apple ID登录
- 使用App Store订阅机制

### 4.4 响应式设计原则

所有界面采用响应式设计，根据不同屏幕尺寸自动调整：

| 屏幕尺寸 | 布局调整 |
|---------|---------|
| <600px  | 垂直堆叠所有元素，订阅卡片占满宽度 |
| 600px-960px | 订阅卡片双列显示 |
| >960px  | 订阅卡片三列并排显示 |

## 5. 实现注意事项

### 5.1 无网络处理

- 缓存认证状态，允许离线使用已授权功能
- 显示明确的网络错误提示
- 网络恢复后自动同步订阅状态

### 5.2 错误处理

| 错误类型 | 处理方式 |
|---------|---------|
| 认证失败 | 显示具体错误原因，提供重试选项 |
| 订阅过程中断 | 提供恢复机制，清晰的状态提示 |
| 支付失败 | 友好错误提示，建议替代支付方式 |
| 权限验证失败 | 引导用户重新登录或联系支持 |

### 5.3 安全考量

- 敏感操作（如取消订阅）需二次确认
- 提供清晰的隐私声明
- 账户活动通知（新设备登录、订阅变更）

### 5.4 试用期特殊处理

- **离线使用**：确保试用状态在离线模式下仍然有效，但需定期在线验证
- **日期变更检测**：防止通过修改系统时间延长试用期
- **多设备同步**：试用状态需在用户所有设备间同步
- **降级体验**：试用到期后，应提供平滑的降级体验，清晰标示不可用功能

### 5.5 试用期转化策略

| 阶段 | 策略 | 设计处理 |
|------|------|---------|
| 试用初期 | 引导用户尝试高级功能 | 任务列表、特性引导 |
| 试用中期 | 收集使用数据，提供个性化建议 | 个性化提示、使用报告 |
| 试用末期 | 提供优惠，强调即将失去的价值 | 倒计时、限时折扣 |
| 试用过期 | 保留用户数据，提供重新激活路径 | 功能锁定提示、一键恢复 |

## 6. 辅助功能支持

- 支持屏幕阅读器
- 提供键盘导航
- 确保足够的颜色对比度
- 响应系统字体大小设置

## 7. 界面原型参考

此部分将提供详细的界面原型，包括：

- 登录/注册界面
- 账户管理界面
- 订阅选择界面
- 订阅管理界面
- 状态提示组件
- 免费试用相关原型

原型将作为单独文件提供，包括交互说明和动画效果。
