# 集字功能文件存储结构

本文档详细描述集字功能的文件存储结构，包括目录组织、文件命名和存储策略。

## 1. 总体存储结构

集字功能的文件存储采用以下目录结构：

```text
storage/
├── characters/                # 字符存储根目录
│   ├── {charId1}/            # 字符1目录（使用UUID）
│   │   ├── original.png      # 原图裁剪 (实际尺寸)
│   │   ├── binary.png        # 二值化图像 (300x300)
│   │   ├── thumbnail.jpg     # 缩略图 (50x50)
│   │   └── outline.svg       # SVG轮廓（可选）
│   ├── {charId2}/            # 字符2目录
│   │   └── ...
│   └── ...
│
├── cache/                     # 缓存目录
│   ├── processing/           # 处理缓存
│   │   ├── {cacheKey1}.bin   # 处理结果缓存1
│   │   ├── {cacheKey2}.bin   # 处理结果缓存2
│   │   └── ...
│   └── temp/                 # 临时文件目录
│       └── ...
│
└── exports/                  # 导出文件目录
    ├── {exportId1}.zip       # 导出包1
    ├── {exportId2}.pdf       # 导出文档2
    └── ...
```

## 2. 文件类型说明

### 2.1 字符图像文件

每个字符都有一组相关的图像文件：

1. **original.png**
   - 直接从原图裁剪的字符图像
   - 保持原始分辨率和比例
   - 用于重新处理和高质量显示
   - 格式：PNG（支持透明度）

2. **binary.png**
   - 经过二值化和标准化处理的图像
   - 固定尺寸：300x300像素
   - 主要用于展示和编辑
   - 格式：PNG（支持透明度）

3. **thumbnail.jpg**
   - 缩略图，用于网格视图展示
   - 固定尺寸：50x50像素
   - 优化大小以提高加载速度
   - 格式：JPEG（减小文件大小）

4. **outline.svg**（可选）
   - 字符轮廓的矢量表示
   - 用于轮廓显示和特效
   - 格式：SVG文本文件

### 2.2 缓存文件

1. **处理缓存文件**
   - 文件名：使用输入参数的哈希值作为键
   - 内容：序列化的处理结果
   - 目的：避免重复计算，提高性能
   - 生命周期：临时，可被清理

2. **临时文件**
   - 各种临时操作产生的中间文件
   - 在操作完成后自动清理
   - 应用关闭时应全部清理
