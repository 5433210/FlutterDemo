# M3Canvas 性能优化 - 日常检查清单

## 📅 每日开发检查清单

### 🌅 开发开始前 (每天开始时)

#### ✅ 环境检查

- [ ] **开发环境状态**
  - [ ] Flutter SDK版本正确 (`flutter --version`)
  - [ ] IDE/Editor运行正常
  - [ ] 测试设备连接正常
  
- [ ] **代码状态检查**
  - [ ] Git分支正确 (`git status`)
  - [ ] 依赖包更新 (`flutter pub get`)
  - [ ] 代码无编译错误
  
- [ ] **性能监控准备**
  - [ ] 性能分析工具启动
  - [ ] 基线数据确认
  - [ ] 测试场景准备

#### 🎯 当日任务确认

- [ ] **任务优先级确认**
  - [ ] 今日核心任务明确
  - [ ] 依赖任务状态检查
  - [ ] 预计完成时间评估
  
- [ ] **资源准备**
  - [ ] 相关文档资料
  - [ ] 测试数据准备
  - [ ] 技术资料查阅

---

## 🔄 开发过程中检查 (每个任务完成后)

### ✅ 代码质量检查

#### 📝 代码标准

- [ ] **编码规范**
  - [ ] 代码格式化 (`dart format .`)
  - [ ] Lint检查通过 (`flutter analyze`)
  - [ ] 命名规范符合项目标准
  - [ ] 注释完整且清晰

#### 🧪 功能验证

- [ ] **基础功能**
  - [ ] 新功能正常工作
  - [ ] 现有功能无回归
  - [ ] 边界场景处理正确
  - [ ] 错误处理健壮

#### ⚡ 性能验证

- [ ] **即时性能检查**
  - [ ] 操作响应流畅
  - [ ] 无明显卡顿现象
  - [ ] 内存使用正常
  - [ ] CPU使用率合理

### 📊 数据记录

```markdown
## 任务完成记录
**日期**: [YYYY-MM-DD]
**任务**: [任务编号和描述]
**耗时**: [实际用时 vs 预估时间]
**FPS数据**: [优化前 → 优化后]
**问题记录**: [遇到的问题和解决方案]
**下一步**: [后续任务规划]
```

---

## 🌙 开发结束前 (每天结束时)

### ✅ 代码提交检查

#### 🔍 提交前验证

- [ ] **完整性检查**
  - [ ] 所有修改文件包含在提交中
  - [ ] 测试文件同步更新
  - [ ] 文档更新完整
  - [ ] 配置文件正确

- [ ] **质量保证**
  - [ ] 单元测试通过
  - [ ] 集成测试无报错
  - [ ] 性能回归测试通过
  - [ ] 代码审查准备就绪

#### 💾 Git操作

- [ ] **提交信息**
  - [ ] 提交信息清晰描述
  - [ ] 相关issue/任务号包含
  - [ ] 提交粒度合适
  
```bash
# 标准提交信息格式
git commit -m "feat(canvas): implement element-level RepaintBoundary optimization

- Add RepaintBoundary wrapper for each canvas element
- Implement stable Key strategy for elements
- Performance improvement: FPS increased from 30 to 45
- Related to Task 1.1.2

Fixes: #issue-number"
```

### 📈 进度更新

- [ ] **任务状态更新**
  - [ ] 任务跟踪器状态更新
  - [ ] 完成度百分比更新
  - [ ] 遇到问题记录
  - [ ] 明日计划确认

---

## 📅 每周里程碑检查

### 🎯 阶段完成验证

#### 📊 性能指标验证

```bash
# Week 1 结束验证脚本
flutter test test/performance/week1_milestone_test.dart

# 预期结果:
# ✅ FPS提升 ≥30%
# ✅ 响应延迟 ≤30ms  
# ✅ 内存稳定性通过
# ✅ 功能回归测试通过
```

#### 📝 阶段报告生成

```markdown
# Week [X] 阶段完成报告

## 📊 性能指标达成情况
| 指标 | 目标 | 实际 | 状态 |
|------|------|------|------|
| FPS提升 | ≥30% | [实际数据] | ✅/❌ |
| 响应延迟 | ≤30ms | [实际数据] | ✅/❌ |
| 内存优化 | 稳定增长<10MB | [实际数据] | ✅/❌ |

## ✅ 完成任务清单
- [x] Task 1.1: 元素级RepaintBoundary优化
- [x] Task 1.2: 拖拽状态分离系统
- [ ] Task 1.3: 性能监控系统 (进行中)

## 🚨 风险和问题
1. **[问题描述]**: [解决方案]
2. **[风险项]**: [缓解措施]

## 📋 下周计划
1. [具体任务规划]
2. [重点关注项]
3. [资源需求]
```

---

## 🚨 紧急情况处理清单

### ⚠️ 性能严重下降

- [ ] **立即回滚**
  - [ ] 切换到功能开关的稳定版本
  - [ ] 确认用户功能正常
  - [ ] 记录性能下降数据

- [ ] **问题诊断**
  - [ ] 使用Flutter Inspector分析
  - [ ] 检查内存使用异常
  - [ ] 确认最近代码变更

- [ ] **修复验证**
  - [ ] 修复后重新测试
  - [ ] 确认性能恢复
  - [ ] 防止类似问题复发

### 🐛 功能回归问题

- [ ] **影响评估**
  - [ ] 确认影响范围
  - [ ] 评估用户影响程度
  - [ ] 制定修复优先级

- [ ] **快速修复**
  - [ ] 最小化修改原则
  - [ ] 快速测试验证
  - [ ] 及时部署修复

### 🔧 开发环境问题

- [ ] **环境恢复**
  - [ ] 重新配置开发环境
  - [ ] 确认工具链正常
  - [ ] 恢复测试数据

---

## 📋 任务完成验证模板

### ✅ Task 完成验证清单

#### 📌 Task [编号]: [任务名称]

**基本信息**:

- **开始时间**: [YYYY-MM-DD HH:MM]
- **完成时间**: [YYYY-MM-DD HH:MM]
- **实际耗时**: [X小时] (预估: [Y小时])
- **负责人**: [开发者姓名]

**功能验证** ✅:

- [ ] **核心功能**: [具体功能描述] - 工作正常
- [ ] **边界场景**: [测试场景] - 处理正确
- [ ] **错误处理**: [错误场景] - 处理健壮
- [ ] **性能表现**: [性能指标] - 达到预期

**技术验证** ✅:

- [ ] **代码质量**: Lint检查通过, 注释完整
- [ ] **测试覆盖**: 单元测试覆盖率 ≥80%
- [ ] **文档更新**: 相关文档同步更新
- [ ] **代码审查**: 通过团队审查

**性能验证** ✅:

- [ ] **FPS数据**: 优化前 [X]fps → 优化后 [Y]fps (提升 [Z]%)
- [ ] **内存使用**: [内存数据对比]
- [ ] **响应时间**: [延迟数据对比]
- [ ] **稳定性**: 连续测试 [X] 分钟无问题

**集成验证** ✅:

- [ ] **功能集成**: 与现有功能无冲突
- [ ] **依赖关系**: 依赖项正确处理
- [ ] **向后兼容**: 不影响现有API
- [ ] **配置项**: 功能开关正常工作

**交付物** 📁:

- [ ] **源代码**: [相关文件列表]
- [ ] **测试代码**: [测试文件列表]
- [ ] **文档更新**: [文档文件列表]
- [ ] **性能数据**: [测试报告链接]

**签字确认** ✍️:

- **开发者**: [签名] [日期]
- **代码审查**: [签名] [日期]
- **测试验证**: [签名] [日期]
- **项目经理**: [签名] [日期]

---

## 🔄 持续改进

### 📈 效率优化建议

#### 🛠️ 工具链优化

- [ ] **IDE配置优化**: 配置代码模板，快捷键，插件
- [ ] **自动化脚本**: 创建常用操作的自动化脚本
- [ ] **测试工具**: 使用性能分析工具，自动化测试

#### 📚 知识积累

- [ ] **技术文档**: 记录学到的优化技巧
- [ ] **问题库**: 建立常见问题解决方案库
- [ ] **最佳实践**: 总结项目最佳实践

#### 🤝 团队协作

- [ ] **经验分享**: 定期分享优化经验
- [ ] **代码审查**: 相互学习代码质量
- [ ] **技术讨论**: 讨论技术难点和解决方案

---

*最后更新: 2024年1月 | 版本: v1.0*
*配合使用文件: m3_canvas_task_tracker.md*
