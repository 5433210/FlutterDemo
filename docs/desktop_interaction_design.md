# 书法集字应用桌面端交互设计

## 一、界面总体布局

### 1.1 主窗口结构

- 顶部：标题栏
  - 左侧：应用图标+标题
  - 右侧：最小化/最大化/关闭按钮
- 左侧：主导航栏
  - 作品
    - 作品管理
  - 集字
    - 集字管理
  - 字帖
    - 模版管理
    - 字帖管理
  - 设置
- 右侧：内容区域
  - 顶部工具栏（根据当前页面动态变化）
  - 主内容区域
  - 底部状态栏（显示操作提示/进度等）

## 二、核心功能交互设计

### 2.1 作品管理

#### 作品列表视图

- 布局模式切换
  - 网格视图：缩略图为主（默认）
  - 列表视图：详细信息为主
- 排序与筛选
  - 左上角：导入作品按钮、视图切换按钮
  - 右上角：排序方式下拉菜单
  - 搜索栏：支持关键字、作者、风格等多条件搜索

#### 作品详情视图

- 基本布局
  - 左侧主区域（70%宽度）: 作品图片预览
  - 右侧边栏（30%宽度）: 信息面板

- 顶部工具栏
  - 集字操作按钮
    - 点击进入集字操作界面
  - 视图工具组：缩放、平移、旋转工具
  - 基础工具组：保存、导出、删除等

- 主区域内容
  - 左侧主区域
    - 图片预览与缩放平移
    - 已采集汉字区域标注显示（半透明遮罩）
  - 右侧边栏
    - 作品基本信息卡片
      - 展示与编辑作品信息
        - 名称、创作者、创作时间、风格、书写工具、备注
        - 取消、确认按钮
      - 创建时间、修改时间等
    - 采集信息卡片
      - 已采集字数
      - 已采集汉字视图（网格/列表）
    - 关联字帖卡片
      - 使用了本作品集字的字帖列表

#### 作品导入对话框

- 对话框布局
  - 标题栏：导入书法作品
  - 宽度：与主界面一致
  - 高度：与主界面一致
  - 模态显示（背景遮罩）

- 内容区域布局
  - 左侧预览区（60%宽度）
    - 拖拽提示区域
      - 虚线边框
      - "拖拽图片到此处或点击选择文件"提示文字
      - 支持的格式提示：JPG、PNG、TIFF等
    - 图片预览
      - 自适应缩放
      - 鼠标悬停显示原始尺寸信息
      - 右上角显示文件大小
    - 工具栏
      - 预处理工具组（选择图片后显示）
        - 旋转按钮（90度/自由角度）
        - 裁剪按钮
        - 重置按钮
      - 图片浏览
        - 缩放
        - 平移  
  - 右侧信息面板（40%宽度）
    - 基本信息表单
      - 作品名称（必填）
      - 创作者
      - 创作时间（日期选择器）
      - 书法风格（下拉选择）
        - 楷书、行书、草书、隶书、篆书等
      - 书写工具（单选）
        - 毛笔、硬笔
      - 备注（多行文本）
    - 导入选项
      - 自动优化图片质量（开关）
      - 保存原始图片副本（开关）

- 底部按钮区
  - 取消按钮
  - 导入按钮（必填项未填写时禁用）

- 交互行为
  - 文件选择
    - 点击预览区打开文件选择器
    - 支持拖拽文件到预览区
    - 选择后自动预览
  - 图片预处理
    - 旋转操作实时预览
    - 裁剪操作支持框选并预览
  - 表单验证
    - 必填项实时检查
    - 自动去除首尾空格
  - 快捷键
    - Esc：关闭对话框
    - Enter：触发导入按钮（启用状态）

- 状态反馈
  - 文件拖拽时高亮提示区域
  - 不支持的文件格式红色提示
  - 必填项未填写红色提示
  - 导入过程显示进度条

### 2.2 集字操作

- 显示方式
  - 从作品详情视图点击"进入集字模式"按钮触发
  - 以模态面板形式覆盖在主窗口上
  - 大小与主窗口相同
  
- 面板布局
  - 顶部工具栏
    - 退出按钮（左）
    - 预处理工具组（中）
      - 自动识别笔画开关
      - 降噪滑块
      - 二值化滑块
      - 灰度范围滑块
      - 恢复初始状态
    - 操作工具组（右）
      - 清空选择（鼠标右键点击作品预览区实现相同效果）
        - 取消当前所有选中，已保存的集字不受影响
      - 撤销/重做
  
  - 左侧工具面板
    - 选择工具
      - 点击选择
        - 自动识别模式
          - 点击选择自动识别出来的笔画，涉及多个笔画则多次点击
          - 点击选中后再次点击取消选中
        - 手动识别模式
          - 不可用
      - 矩形框择
        - 自动识别模式
          - 框选自动识别出来的笔画，同一个字需要时可多次框选
        - 手动识别模式
          - 每次框选区域作为单个汉字采集范围的部分区域
          - 可多次选择
      - 套索选择（自由绘制选区）
        - 自动识别模式
          - 框选自动识别出来的笔画，同一个字需要时可多次框选
        - 手动识别模式
          - 每次框选区域作为单个汉字采集范围的部分区域
          - 可多次选择
    - 视图工具
      - 缩放
      - 平移

  - 中央区域
    - 作品预览区
      - 缩放平移功能，提供键鼠快捷操作（缩放：鼠标滚轮，平移：右键按下）
    - 选区显示
      - 自动识别结果：蓝色虚线框，矩形线框
      - 当前选中：黄色实线框，矩形框选：矩形线框，套索选择：不规则线框
      - 已保存集字：绿色半透明，矩形线框
    - 操作提示
      - 智能对齐参考线
      - 快捷键提示

  - 右侧面板
    - 集字结果预览
      - 实时预览效果
      - 每次笔画选择实时计算及更新显示结果
      - 简单变换工具（旋转/缩放）
      - 字体颜色设置
      - 集字像素尺寸显示
    - 登记信息表单
      - 对应简体字（必填）
      - 风格（单选），默认使用作品信息，可修改
      - 书写工具（单选），默认使用作品信息，可修改
      - 备注（选填）
    - 操作按钮
      - 保存集字
        - 点击后弹出确认对话框，包括集字效果图，像素尺寸，以及登记信息内容，用户确认后保存
      - 清空选择
        - 取消当前所有选中，已保存的集字不受影响

- 状态栏
  - 左侧：当前工具提示
  - 中间：图片信息
  - 右侧：选区信息（数量/位置）

- 交互行为
  - 每次的操作自动保存到作品信息中
  - 退出行为
    - 自动保存所有已完成的集字
    - 提示是否保存当前未完成的操作
    - 返回作品详情视图
    - 更新作品的采集进度信息

### 2.3 集字管理

- 界面布局
  - 左侧列表区（35%宽度）
    - 顶部：搜索与筛选工具栏
      - 搜索框：支持简体字/作品名称搜索
      - 筛选条件：书法风格、书写工具多选
    - 内容区：网格/列表双视图切换
      - 网格视图（默认）
        - 集字图片预览
        - 简体字显示
        - 来源作品名称
      - 列表视图
        - 包含完整元数据信息
    - 底部：分页/加载更多

  - 右侧详情区（65%宽度）
    - 顶部：工具栏
      - 编辑按钮
      - 导出按钮
      - 删除按钮
      - 查看原作按钮
    - 中部：集字预览区
      - 支持缩放平移
      - 显示参考网格（可选）
    - 右侧：信息面板（可折叠）
      - 基础信息卡片
        - 简体字
        - 繁体字
        - 风格
        - 书写工具
      - 来源信息卡片
        - 作品名称（可点击跳转）
        - 在原作中位置
      - 关联字帖卡片
        - 使用该集字的字帖列表
        - 点击可跳转至对应字帖

- 交互行为
  - 左侧列表项点击：右侧加载对应集字详情
  - 左侧列表支持多选：批量导出/删除
  - 右侧预览区双击：放大至全屏预览
  - 查看原作：在新窗口打开原作品并定位显示

### 2.4 模板管理

#### 模板列表视图

- 布局设计
  - 左侧：分类树
    - 系统预设
    - 我的模板
  - 右侧：模板预览区
    - 网格布局展示
    - 每个模板项显示
      - 缩略图
      - 模板名称
      - 创建时间
- 顶部工具栏
  - 新建模板按钮（跳转模板设计器）
  - 导入模板按钮
  - 视图切换按钮
- 右键菜单（调整到配套的工具栏是否更合理？）
  - 编辑（打开模板设计器）
  - 导出
  - 删除
  - 创建副本

#### 模板详情视图

- 界面布局
  - 左侧预览区（65%宽度）
    - 多页预览
      - 缩略图列表（可拖动调整顺序）
      - 当前页高亮显示
    - 主预览区
      - 缩放平移控制
      - 参考网格（可选）
      - 标尺显示；
      - 图层透明度预览
      - 填充区域高亮显示

  - 右侧信息面板（35%宽度）
    - 基础信息卡片
      - 模板名称
      - 创建时间
      - 修改时间
      - 使用次数统计
      - 标签管理
    - 页面设置卡片
      - 尺寸信息
      - 页边距
      - 页数
      - 背景设置
    - 填充区域列表
      - 显示所有可填充区域
      - 每个区域显示：
        - 序号
        - 默认字号
        - 默认颜色
        - 填充模式
      - 支持快速编辑默认属性
    - 相关字帖卡片
      - 使用此模板的字帖列表
      - 点击可跳转查看

- 顶部工具栏
  - 编辑按钮（打开模板设计器）
  - 创建字帖按钮（使用当前模板）
  - 导出按钮（SVG/PNG格式）
  - 复制按钮（创建副本）
  - 删除按钮

- 交互行为
  - 双击预览区：进入编辑模式
  - 拖拽页面缩略图：调整页面顺序
  - 点击填充区域：高亮显示对应区域
  - 悬停填充区域：显示详细属性提示

### 2.5 模板设计

- 界面布局
  - 顶部工具栏
    - 文件操作组
      - 保存
      - 导出
    - 编辑操作组
      - 撤销/重做
      - 复制/粘贴
      - 删除
    - 视图操作组  
      - 显示网格
      - 显示参考线
      - 缩放级别

  - 左侧工具面板
    - 工具面板视图
      - 页面设置
        - 尺寸预设/自定义
        - 页边距调整
        - 背景设置（纹理/颜色）
      - 工具
        - 集字填充区
        - 文本框
        - 图片
        - 图层背景
        - 参考线
    - 图层列表视图
      - 新增图层按钮
      - 显示所有图层
      - 图层排序（拖拽）
      - 图层可见性切换
      - 图层锁定控制
      - 图层删除按钮
  - 中央设计区视图
    - 画布区域
      - 支持拖拽添加元素
      - 网格吸附功能
      - 智能对齐提示
    - 标尺与参考线
      - 水平/垂直标尺
      - 拖出参考线
      - 快速对齐线
    - 选择操作
      - 框选多个元素
      - 按住Shift多选
      - 组合/解组

  - 右侧属性面板视图
    - 页面属性（选中画布）
      - 尺寸
      - 背景设置
    - 集字填充区属性（选中集字填充区）
      - 位置、大小、旋转角度、对齐方式、透明度、默认颜色、默认间距、默认字体大小、填充方式：默认（按默认属性自动自动）|自由（由用户填充时自由调整）
    - 文本框属性（选中文本框）
      - 位置、大小、旋转角度、对齐方式、间距大小、透明度、字体、字号、颜色、文本内容、字帖内是否可变更开关
    - 图片属性（选中图片）
      - 位置、大小、旋转角度、透明度、字帖内是否可变更开关
    - 图层背景（选中图层列表视图的特定图层）
      - 图片选择
      - 缩略图、透明度

### 2.6 字帖管理

#### 字帖列表视图

- 顶部工具栏
  - 新建字帖按钮
  - 视图切换按钮（网格/列表）
  - 排序下拉菜单
  - 批量操作按钮组（选中多个时显示）

- 搜索与筛选区
  - 搜索框：支持标题/内容关键字
  - 筛选条件：
    - 按模板类型
    - 按创建时间
    - 按使用字体

- 内容列表区
  - 网格视图（默认）
    - 字帖缩略图
    - 标题
    - 创建时间
    - 右下角状态图标（草稿/已完成）
    - 右上角快捷操作菜单按钮（悬停显示）
  - 列表视图
    - 标题与缩略图
    - 使用模板
    - 字数统计
    - 创建/修改时间
    - 状态标签
    - 操作按钮组

- 交互行为
  - 单击：切换到详情视图
  - 双击：直接进入编辑模式
  - 快捷操作按钮组
    - 编辑
    - 复制
    - 导出
    - 打印
    - 删除
  - 拖拽功能
    - 支持排序
    - 支持拖入文件夹
  - 多选操作
    - Shift/Ctrl多选
    - 批量导出
    - 批量删除

#### 字帖详情视图

- 界面布局
  - 顶部工具栏
    - 编辑按钮（进入字帖编辑器）
    - 导出按钮（PDF/图片）
    - 打印按钮
    - 分享按钮
    - 删除按钮

  - 左侧预览区（65%宽度）
    - 页面导航栏
      - 缩略图列表（支持多页预览）
      - 页码指示器
    - 主预览区
      - 当前页面大图预览
      - 支持缩放平移
      - 支持页面切换

  - 右侧信息面板（35%宽度）
    - 基础信息卡片
      - 标题
      - 描述
      - 创建时间
      - 修改时间
      - 模板信息，点击可以跳转到模板详情
    - 集字卡片
      - 使用到的集字列表
      - 点击可跳转查看原作

- 交互行为
  - 双击预览区：放大至全屏预览
  - 滚轮：缩放预览
  - Space+拖动：平移预览
  - 左右方向键：切换页面
  - 点击集字来源：跳转至原作品

- 状态管理
  - 记住上次浏览位置
  - 自动保存查看历史
  - 缓存预览图片

### 2.7 字帖编辑

- 界面布局
  - 顶部工具栏
    - 左侧：文件操作组
      - 保存
        - 弹出保存对话框
      - 另存为
        - 弹出另存对话框
      - 导出（下拉选择PDF/图片格式）
        - 弹出导出对话框
      - 打印预览
        - 弹出打印预览对话框
    - 中间：编辑操作组
      - 撤销/重做
      - 复制/粘贴
      - 删除
    - 右侧：视图操作组
      - 缩放控制
      - 页面缩略图开关
      - 辅助线开关

  - 左侧面板
    - 上栏
      - 图层列表视图页
        - 显示字帖当前页使用模板的所有图层
        - 可以选择图层
    - 下栏
      - 内容选择页
        - 汉字输入框
          - 支持直接输入多个汉字
          - 支持粘贴文本
        - 汉字列表
          - 根据输入框汉字生成
          - 可以快速选择
        - 候选集字列表
          - 选择汉字列表项后更新
          - 网格视图显示匹配的集字
          - 每个字显示缩略图和来源信息
          - 支持风格/工具筛选
          - 悬停显示大图预览
          - 拖拽或双击添加到编辑区
        - 快速筛选工具栏
          - 按书法风格
          - 按书写工具
          - 按来源作品
      - 图片素材库页

  - 中央编辑区
    - 页面导航栏
      - 缩略图预览
      - 页面顺序调整
      - 添加/删除页面
        - 添加页面时，弹出模板选择对话框
    - 模板显示区
      - 参考线网格（可选）
      - 智能对齐提示
      - 集字填充区域、可变文本区、可变图片区都高亮显示
    - 内容编辑
      - 拖拽放置元素
      - 自由变换控制点
      - 多选操作
        - 框选
        - Shift/Ctrl多选
        - 组合/解组
    - 智能辅助
      - 对齐参考线
      - 等距分布提示
      - 智能吸附

  - 右侧属性面板
    - 模板信息（选中模板显示区）
      - 显示当前页所用模板信息
    - 集字填充区属性（选中集字填充区）
      - 位置、大小、旋转角度、对齐方式、透明度、默认颜色、默认间距、默认字体大小、所属图层、填充方式：默认（按默认属性自动自动）|自由（由用户填充时自由调整）
    - 文本框属性（选中文本框）
      - 位置、大小、旋转角度、对齐方式、间距大小、透明度、字体、字号、颜色、文本内容、所属图层
    - 图片属性（选中图片）
      - 位置、大小、旋转角度、透明度、所属图层
    - 图层背景（选中图层列表视图的特定图层）
      - 图片选择
      - 缩略图、透明度

- 自动保存
  - 定时自动保存（每5分钟）
  - 重要操作后自动保存
  - 退出前检查未保存内容

## 三、辅助功能设计

### 3.1 操作反馈

- 状态提示
  - 操作成功：右下角绿色提示
  - 警告信息：黄色对话框
  - 错误提示：红色对话框
- 进度显示
  - 文件导入：进度条
  - 批量处理：任务列表
- 操作历史
  - 可视化时间轴
  - 版本对比视图

### 3.2 用户引导

- 首次使用
  - 功能引导页
  - 交互提示
- 快捷键提示
  - 按键显示
  - 快捷键列表

### 3.3 性能优化

- 大图加载
  - 分块加载
  - 渐进式显示
- 后台处理
  - 异步保存
  - 自动备份

## 四、配置与设置

### 4.1 界面定制

- 主题切换
  - 明亮/暗黑模式
  - 主题色定制
- 布局调整
  - 面板大小
  - 显示密度

### 4.2 性能设置

- 缓存管理
  - 缓存位置
  - 清理策略
- 硬件加速
  - GPU加速开关
  - 内存使用限制

## 五、注意事项

### 5.1 桌面端特性

- 支持多窗口
- 响应式布局
- 高分屏适配
- 支持外接设备

### 5.2 交互原则

- 操作可逆
- 快捷键优先
- 拖放友好
- 上下文菜单
