# 当前存储信息显示简化报告

## 修改概述

根据用户需求，简化了当前存储信息对话框的显示内容，只保留核心的存储统计信息。

## 具体修改内容

### 1. 数据模型扩展 (`storage_info_provider.dart`)

**新增字段**：
- `databaseSize`: 数据库文件大小
- `backupCount`: 备份文件数量  
- `backupSize`: 备份文件总大小

**新增计算逻辑**：
- 统计 `database` 目录的大小
- 统计 `backups` 目录中 `.backup` 文件的数量和总大小

### 2. 存储信息对话框简化 (`unified_storage_settings.dart`)

**移除的信息**：
- 文件数量统计
- 目录详情列表
- 分类统计详情面板
- 使用率百分比

**保留的核心信息**：
- 总大小（显示已使用大小 `usedSize`）
- 作品：数量 + 大小
- 集字：数量 + 大小  
- 图库：数量 + 大小
- 数据库大小
- 备份：数量 + 大小（仅当有备份时显示）

### 3. 新增UI组件

**`_buildCategoryRow` 方法**：
- 专门用于显示"数量 + 大小"的分类信息
- 右对齐显示数量和大小
- 数量显示格式："X 个"
- 大小使用 `FileSizeFormatter` 格式化

## 界面效果

### 布局结构
```
当前存储信息
├── 存储位置: [路径]
└── 核心统计容器
    ├── 总大小: XXX MB
    ├── 作品: X 个 / XXX MB  
    ├── 集字: X 个 / XXX MB
    ├── 图库: X 个 / XXX MB
    ├── 数据库大小: XXX KB
    └── 备份: X 个 / XXX MB (条件显示)
```

### 视觉特点
- 信息更加聚焦和简洁
- 减少了不必要的详细信息
- 突出了用户最关心的存储统计
- 保持了良好的可读性和专业感

## 用户体验提升

1. **信息密度优化**：去除冗余信息，聚焦核心数据
2. **快速浏览**：用户可以快速了解各类数据的规模
3. **条件显示**：备份信息仅在有备份时显示，避免混淆
4. **统一格式**：所有分类信息采用相同的"数量+大小"格式

## 技术保证

- 所有修改通过静态分析检查
- 保持了代码的可维护性
- 新增的计算逻辑有异常处理
- UI组件复用性良好

这次简化使存储信息对话框更加实用和用户友好，符合"少即是多"的设计原则。
